# ๐ ุชุญููู ุดุงูู: ูุณู ุงูุชุนููู ูุงูุฏุฑุฌุงุช (System 05)
## ุงููุดุงูู ุงูููุชุดูุฉ + ุฎุทุฉ ุฅุนุงุฏุฉ ุงูููููุฉ ุงูููุชุฑุญุฉ

---

## ๐ ููุฎุต ุณุฑูุน

ุจุนุฏ ุชุญููู System 05 ูุฌููุน ุงูุฃูุธูุฉ ุงููุฑุชุจุทุฉ ุจู (04, 08, 11, 16, 17)ุ ุชู ุงูุชุดุงู **6 ูุดุงูู ูููููุฉ** ุชุญุชุงุฌ ูุนุงูุฌุฉ. ุฃุฏูุงู ุงูุชุญููู ุงูุชูุตููู ูุงูุญููู ุงูููุชุฑุญุฉ.

---

## ๐ด ุงููุดููุฉ #1: ุฏุฑุฌุฉ ุงูููุงุธุจุฉ (attendance_score) ุบูุฑ ูุฑุชุจุทุฉ ุจูุธุงู ุงูุญุถูุฑ

### ุงููุถุน ุงูุญุงูู
- ูู [monthly_grades](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L147-L162) ููุฌุฏ ุญูู `attendance_score` ููุฏุฎู **ูุฏููุงู**
- ูู [student_attendance](file:///c:/Users/mousa/Desktop/systems/04_ุงูุทูุงุจ/DDL.sql#L277-L298) ููุฌุฏ ูุธุงู ุญุถูุฑ ูุงูู ูุน `status_id` ู `has_permission` ู `has_excuse`

### ุงููุดููุฉ
โ **ูุง ููุฌุฏ ุฑุจุท** ุจูู `attendance_score` ูู ุงูุฏุฑุฌุงุช ููุธุงู ุงูุญุถูุฑ ุงููุนูู. ุงููุนูู ููุชุจ ุงูุฑูู ูุฏููุงู!

### ุงูุญู ุงูููุชุฑุญ
โ ุฅูุดุงุก View ุฃู Stored Procedure ูุญุณุจ `attendance_score` **ุขููุงู** ูู ุฌุฏูู `student_attendance`:

```sql
-- ูุซุงู: ุญุณุงุจ ุฏุฑุฌุฉ ุงูููุงุธุจุฉ ูู ุจูุงูุงุช ุงูุญุถูุฑ ุงููุนููุฉ
-- attendance_score = max_attendance_score ร (ุฃูุงู ุงูุญุถูุฑ รท ุฅุฌูุงูู ุงูุฃูุงู)
```

---

## ๐ด ุงููุดููุฉ #2: ูุง ุชูุฌุฏ ูุชูุฌุฉ ุงูุนุงู (Annual Result)

### ุงููุถุน ุงูุญุงูู
- [semester_grades](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L164-L184): ูุชูุฌุฉ **ูุตู ูุงุญุฏ** ููุท
- [v_certificate_data_primary](file:///c:/Users/mousa/Desktop/systems/17_ูุธุงู_ุงูุดูุงุฏุงุช/DDL.sql#L111-L138): ูุฌูุน semester_grades ููู ุจุฏูู ุฌุฏูู ูุงุถุญ

### ุงููุดููุฉ
โ ูุง ููุฌุฏ ุฌุฏูู `annual_grades` ูุญุณุจ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ููุนุงู** ูู ุงููุตููู (ุงูุฃูู + ุงูุซุงูู)
โ ุญุณุงุจ ุงููุฌุงุญ/ุงูุฑุณูุจ/ุงูููู ุบูุฑ ููุฌูุฏ ูู ุฃู ููุงู

### ุงูุญู ุงูููุชุฑุญ
โ ุฅูุดุงุก ุฌุฏูู `annual_grades` ุฌุฏูุฏ:

```sql
-- annual_grades:
--   enrollment_id, subject_id
--   semester1_total, semester2_total
--   annual_total
--   final_status: 'ูุงุฌุญ' / 'ุฑุงุณุจ' / 'ูููู' / 'ูุญุฑูู (ุบูุงุจ)'
```

โ ุฅูุดุงุก ุฌุฏูู `annual_result` ูููุชูุฌุฉ ุงูููุงุฆูุฉ ุงูุดุงููุฉ:

```sql
-- annual_result:
--   enrollment_id
--   total_all_subjects, percentage
--   rank_in_class
--   promotion_decision: 'ูููู ููุตู ุงูุชุงูู' / 'ูุนูุฏ' / 'ูููุตู'
```

---

## ๐ด ุงููุดููุฉ #3: ูุธุงู ุงููุงุฌุจุงุช ูุนูุฏ ุฃูุซุฑ ูู ุงููุงุฒู

### ุงููุถุน ุงูุญุงูู
- [homeworks](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L96-L111): ุชุนุฑูู ูุงุฌุจ ูุน `title`, `content`, `max_grade`
- [student_homeworks](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L113-L124): ุฑุตุฏ ุงููุงุฌุจ ููู ุทุงูุจ ูุน `status`, `grade`, `teacher_feedback`

### ุงููุดููุฉ
โ ูู ุงููุงูุน ุงููุนูู ููุท ูุญุฏุฏ: **ูููุฐ โ / ูู ูููููุฐ โ** โ ูุงููุธุงู ูุญุณุจ ุงูุฏุฑุฌุฉ ุขููุงู
โ ุงููุธุงู ุงูุญุงูู ููุชุฑุถ ุฃู ูู ูุงุฌุจ ูู ุชูููู ุชูุตููู ููุฐุง ุบูุฑ ุนููู

### ุงูุญู ุงูููุชุฑุญ
โ ุชุจุณูุท `student_homeworks`:

```diff
- status ENUM('COMPLETED', 'INCOMPLETE', 'LATE', 'EXCUSED')
- grade DECIMAL(4,1)
- teacher_feedback TEXT

+ is_completed BOOLEAN DEFAULT FALSE COMMENT 'ููุฐ/ูู ูููุฐ'
```

โ ุงูุฏุฑุฌุฉ ุชูุญุณุจ ุขููุงู:
```
ุฏุฑุฌุฉ ุงููุงุฌุจุงุช = (ุนุฏุฏ ุงููุงุฌุจุงุช ุงููููุฐุฉ รท ุฅุฌูุงูู ุงููุงุฌุจุงุช) ร max_homework_score
```

---

## ๐ก ุงููุดููุฉ #4: ุงููุธุงู "ูุชูุฉ ูุงุญุฏุฉ" ุจุฏูุงู ูู ุฃูุธูุฉ ูุฑุนูุฉ

### ุงููุถุน ุงูุญุงูู
ูู ุดูุก ูุฏูุฌ ูู ูุฌูุฏ ูุงุญุฏ `05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช`:
- ุงูุงุฎุชุจุงุฑุงุช + ุงููุงุฌุจุงุช + ุงูุชุญุถูุฑ + ุงูุฏุฑุฌุงุช + ุงูุชุฏููู

### ุงููุดููุฉ
โ ุตุนูุจุฉ ุงูุตูุงูุฉ ูุงูุชุทููุฑ
โ ุงููุนูู ุงูุฐู ูุญุชุงุฌ ููุท ุฑุตุฏ ุงููุงุฌุจุงุช ูุฌุจ ุฃู ูุชุนุงูู ูุน ูู ุดูุก

### ุงูุญู ุงูููุชุฑุญ
โ ูุตู ุฅูู ูููุงุช DDL ุฏุงุฎููุฉ ูุงุถุญุฉ (ุฏุงุฎู ููุณ ุงููุฌูุฏ):

```
05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/
โโโ DDL.sql                    โ ุงูุฌุฏูู ุงูุฑุฆูุณู (grading_policies + lookup)
โโโ DDL_EXAMS.sql              โ ุงูุงุฎุชุจุงุฑุงุช ูุงููุชุฑุงุช ูุงูุฑุตุฏ
โโโ DDL_HOMEWORKS.sql          โ ุงููุงุฌุจุงุช ุงูููุฒููุฉ
โโโ DDL_MONTHLY.sql            โ ุงููุญุตูุงุช ุงูุดูุฑูุฉ
โโโ DDL_SEMESTER_ANNUAL.sql    โ ูุชุงุฆุฌ ุงููุตู + ูุชูุฌุฉ ุงูุนุงู
โโโ DDL_LESSON_PREP.sql        โ ุชุญุถูุฑ ุงูุฏุฑูุณ
โโโ DDL_AUDIT.sql              โ ุงูุชุฏููู ูุงูุญูููุฉ
โโโ DEMO_DATA.sql
โโโ README.md
```

---

## ๐ก ุงููุดููุฉ #5: ุงูุงุฎุชุจุงุฑุงุช ููุฑุฑุฉ ูุน ูุธุงู ูุฌุงู ุงูุงูุชุญุงูุงุช (System 08)

### ุงููุถู ุงูุญุงูู
- System 05: [exam_periods](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L42-L60) + [exam_schedules](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L62-L74)
- System 08: [exam_sessions](file:///c:/Users/mousa/Desktop/systems/08_ูุฌุงู_ุงูุงูุชุญุงูุงุช/DDL.sql#L82-L128) + [exam_session_periods](file:///c:/Users/mousa/Desktop/systems/08_ูุฌุงู_ุงูุงูุชุญุงูุงุช/DDL.sql#L134-L148)

### ุงูุนูุงูุฉ ุงูุญุงููุฉ
โ ููุฌุฏ ุฑุจุท ุนุจุฑ `exam_session_periods` โ ููุฐุง **ุตุญูุญ ููุตูู ุฌูุฏุงู**:
- System 05 = **ุงูุฌุงูุจ ุงูุฃูุงุฏููู** (ุงูุฏุฑุฌุงุช ูุงููุญุตูุงุช)
- System 08 = **ุงูุฌุงูุจ ุงูููุฌุณุชู** (ุงููุฌุงู ูุงูููุงุนุฏ ูุงูุฃุฑูุงู)

> [!TIP]
> ูุฐุง ุงูุฌุฒุก **ูุง ูุญุชุงุฌ ุชุนุฏูู** โ ุงููุตู ุจูู ุงูุฃูุงุฏููู ูุงูููุฌุณุชู ุณููู ูุนูุงุฑูุงู.

---

## ๐ก ุงููุดููุฉ #6: ูุชูุฌุฉ ุงูุชุฑู ุชุนุชูุฏ ุนูู `semester_work_total` ูุฏูู

### ุงููุถุน ุงูุญุงูู
- `semester_work_total` ูู [semester_grades](file:///c:/Users/mousa/Desktop/systems/05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/DDL.sql#L170) ููุฏุฎู **ูุฏููุงู**

### ุงููุดููุฉ
โ ุงูููุฑูุถ ููุญุณุจ **ุขููุงู** ูู ูุฌููุน `monthly_grades` ูููุณ ุงููุตู

### ุงูุญู ุงูููุชุฑุญ
โ ุฅูุดุงุก View ุฃู Trigger ูุญุณุจ `semester_work_total` ุขููุงู:

```sql
semester_work_total = SUM(
    monthly_grades.attendance_score +
    monthly_grades.homework_score +
    monthly_grades.activity_score +
    monthly_grades.exam_score
) WHERE month_id IN (ุฃุดูุฑ ูุฐุง ุงููุตู)
```

---

## ๐ ููุฎุต ุงููุดุงูู ูุงูุฃููููุงุช

| # | ุงููุดููุฉ | ุงูุฃููููุฉ | ุงูุชุฃุซูุฑ |
|---|---------|----------|---------|
| 1 | attendance_score ูุฏูู | ๐ด **ุนุงููุฉ** | ูุชุงุฆุฌ ุฎุงุทุฆุฉ |
| 2 | ูุง ููุฌุฏ ูุชูุฌุฉ ุงูุนุงู | ๐ด **ุนุงููุฉ** | ุงูุดูุงุฏุงุช ูุงูุตุฉ |
| 3 | ุงููุงุฌุจุงุช ูุนูุฏุฉ | ๐ด **ุนุงููุฉ** | ุงููุนูููู ูู ูุณุชุฎุฏููุง |
| 4 | ุงููุธุงู ูุชูุฉ ูุงุญุฏุฉ | ๐ก **ูุชูุณุทุฉ** | ุตูุงูุฉ ุตุนุจุฉ |
| 5 | ุชูุฑุงุฑ ูุน System 08 | โ **ูุง ุชุญุชุงุฌ** | ูุตูู ุตุญูุญ |
| 6 | semester_work_total ูุฏูู | ๐ก **ูุชูุณุทุฉ** | ุฎุทุฃ ุจุดุฑู ูุญุชูู |

---

## ๐ ุงููุธุงู ุจุนุฏ ุฅุนุงุฏุฉ ุงูููููุฉ (ุงููุฎุทุท ุงูููุชุฑุญ)

```mermaid
flowchart TD
    subgraph external["ุฃูุธูุฉ ุฎุงุฑุฌูุฉ"]
        ATT["System 04<br/>ุงูุญุถูุฑ ูุงูุบูุงุจ"]
        TT["System 11<br/>ุฌุฏูู ุงูุญุตุต"]
        EC["System 08<br/>ูุฌุงู ุงูุงูุชุญุงูุงุช"]
    end

    subgraph sys05["System 05 โ ุงูุชุนููู ูุงูุฏุฑุฌุงุช"]
        GP["ุณูุงุณุงุช ุงูุฏุฑุฌุงุช<br/>grading_policies"]
        
        subgraph exams["ุงูุงุฎุชุจุงุฑุงุช"]
            EP["ุงููุชุฑุงุช ุงูุงูุชุญุงููุฉ"]
            ES["ุฌุฏุงูู ุงูุงุฎุชุจุงุฑุงุช"]
            SES["ุฏุฑุฌุงุช ุงูุทูุงุจ"]
        end

        subgraph hw["ุงููุงุฌุจุงุช (ูุจุณุท)"]
            HW["ุงููุงุฌุจุงุช"]
            SHW["ููุฐ / ูู ูููุฐ"]
        end

        subgraph monthly["ุงููุญุตูุฉ ุงูุดูุฑูุฉ"]
            MG["monthly_grades<br/>(ูุญุณูุจ ุขููุงู)"]
        end

        subgraph results["ุงููุชุงุฆุฌ"]
            SG["ูุชูุฌุฉ ุงููุตู<br/>semester_grades"]
            AG["ูุชูุฌุฉ ุงูุนุงู<br/>annual_grades ๐"]
            AR["ูุฑุงุฑ ุงูููู<br/>annual_result ๐"]
        end

        AUD["ุณุฌู ุงูุชุฏููู"]
    end

    ATT -->|"attendance_score ุขูู"| MG
    SES --> MG
    SHW -->|"homework_score ุขูู"| MG
    MG -->|"ูุฌููุน ุดูุฑู"| SG
    SG -->|"ูุตู1 + ูุตู2"| AG
    AG --> AR
    EC <-->|exam_session_periods| EP

    style AG fill:#2e7d32,color:#fff
    style AR fill:#2e7d32,color:#fff
    style MG fill:#7b1fa2,color:#fff
```

---

## โ ุฃุณุฆูุฉ ุชุญุชุงุฌ ูุฑุงุฑู

1. **ูู ุชูุงูู ุนูู ูุตู ูููุงุช DDL** ุฏุงุฎู ููุณ ุงููุฌูุฏ (ุงููุดููุฉ #4)ุ ุฃู ุชูุถู ูุจูู ููู ูุงุญุฏุ
2. **ูุชูุฌุฉ ุงูุนุงู** โ ูู ุชุฑูุฏ ุฌุฏูู ูุนูู `annual_grades` ุฃู View ูุญุณุจูุง ุนูู ุงูุทุงูุฑุ
3. **ุงููุงุฌุจุงุช** โ ูู ุงููุนูู ูุญุฏุฏ ููุท "ููุฐ/ูู ูููุฐ" ุฃู ูููู ุฃุญูุงูุงู ูุนุทู ุฏุฑุฌุฉ ูุฎุชููุฉุ
4. **ูู ุชุฑูุฏ ุฃุจุฏุฃ ุจุชูููุฐ ุงูุชุนุฏููุงุช** ุนูู DDL.sql ููุฑุงู ุจุนุฏ ุฅุฌุงุจุงุชูุ
