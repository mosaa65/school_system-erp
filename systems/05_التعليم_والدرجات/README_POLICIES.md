# ๐ ุณูุงุณุงุช ุงูุฏุฑุฌุงุช ูุงูุฃูุฒุงู
## DDL_POLICIES โ Grading Policies & Weights

---

## ๐ ุจุทุงูุฉ ุงูููู
| ุงูุจูุฏ | ุงููููุฉ |
|-------|--------|
| **ุงูููู** | `DDL_POLICIES.sql` |
| **ุชุฑุชูุจ ุงูุชูููุฐ** | 1๏ธโฃ ุงูุฃูู |
| **ุนุฏุฏ ุงูุฌุฏุงูู** | 3 |
| **ูุนุชูุฏ ุนูู** | System 02 (ุงูููุงุฉ), System 01 (ุงูุตูุงุญูุงุช) |

---

## ๐ ุงูููุฏูุฉ
ุงูุณูุงุณุงุช ูู "ุฏุณุชูุฑ ุงูุฏุฑุฌุงุช" โ ุชุญุฏุฏ ููู ุตู ููุงุฏุฉ ูุนุงู ุฏุฑุงุณู ูููุน ุชูููู: ูู ุฏุฑุฌุฉ ุงูุงุฎุชุจุงุฑุ ูู ุฏุฑุฌุฉ ุงููุงุฌุจุงุชุ ูู ุฏุฑุฌุฉ ุงูููุงุธุจุฉุ ูู ุฏุฑุฌุฉ ุงููุณุงููุฉุ ููู ุฏุฑุฌุฉ ุงููุฌุงุญ. ูุฐูู ูููู ุฅุถุงูุฉ ููููุงุช ูุฎุตุตุฉ ููู ูุฏุฑุณุฉ.

---

## ๐ ุชูุงุตูู ุงูุฌุฏุงูู

### 1๏ธโฃ ุฌุฏูู ุญุงูุงุช ุงุนุชูุงุฏ ุงูุฏุฑุฌุงุช (lookup_grading_statuses)

| ุงูุญูู | ุงูุงุณู ุงูุจุฑูุฌู | ุงูููุน | ุงููุตู | ูุซุงู |
|-------|---------------|-------|-------|------|
| ุงููุนุฑู | `id` | TINYINT (PK) | ูุนุฑู ูุฑูุฏ | 1 |
| ุงูุงุณู | `name_ar` | VARCHAR(50) | ุงุณู ุงูุญุงูุฉ ุจุงูุนุฑุจู | ูุณูุฏุฉ |
| ููุงุฆูุ | `is_final` | BOOLEAN | ูู ุงูุญุงูุฉ ููุงุฆูุฉ | 0 |
| ูุดุทุ | `is_active` | BOOLEAN | ูู ุงูุญุงูุฉ ูุณุชุฎุฏูุฉ | 1 |

#### ๐ ุจูุงูุงุช ุงุณุชุฑุดุงุฏูุฉ
| id | name_ar | is_final |
|----|---------|----------|
| 1 | ูุณูุฏุฉ | 0 |
| 2 | ููุฏ ุงููุฑุงุฌุนุฉ | 0 |
| 3 | ูุนุชูุฏ | 1 |
| 4 | ูุฑุญู ููุฃุฑุดูู | 1 |

---

### 2๏ธโฃ ุฌุฏูู ุณูุงุณุงุช ุงูุฏุฑุฌุงุช (grading_policies)


---

## ๐ ุชูุงุตูู ุงูุฌุฏุงูู

### 1๏ธโฃ ุฌุฏูู ุญุงูุงุช ุงุนุชูุงุฏ ุงูุฏุฑุฌุงุช (lookup_grading_statuses)

| ุงูุญูู | ุงูุงุณู ุงูุจุฑูุฌู | ุงูููุน | ุงููุตู | ูุซุงู |
|-------|---------------|-------|-------|------|
| ุงููุนุฑู | `id` | TINYINT (PK) | ูุนุฑู ูุฑูุฏ | 1 |
| ุงูุงุณู | `name_ar` | VARCHAR(50) | ุงุณู ุงูุญุงูุฉ ุจุงูุนุฑุจู | ูุณูุฏุฉ |
| ููุงุฆูุ | `is_final` | BOOLEAN | ูู ุงูุญุงูุฉ ููุงุฆูุฉ | 0 |
| ูุดุทุ | `is_active` | BOOLEAN | ูู ุงูุญุงูุฉ ูุณุชุฎุฏูุฉ | 1 |

#### ๐ ุจูุงูุงุช ุงุณุชุฑุดุงุฏูุฉ
| id | name_ar | is_final |
|----|---------|----------|
| 1 | ูุณูุฏุฉ | 0 |
| 2 | ููุฏ ุงููุฑุงุฌุนุฉ | 0 |
| 3 | ูุนุชูุฏ | 1 |
| 4 | ูุฑุญู ููุฃุฑุดูู | 1 |

---

### 2๏ธโฃ ุฌุฏูู ุณูุงุณุงุช ุงูุฏุฑุฌุงุช (grading_policies)

| ุงูุญูู | ุงูุงุณู ุงูุจุฑูุฌู | ุงูููุน | ุงููุตู | ูุซุงู |
|-------|---------------|-------|-------|------|
| ุงููุนุฑู | `id` | INT (PK) | ูุนุฑู ูุฑูุฏ | 1 |
| ุงูุนุงู ุงูุฏุฑุงุณู | `academic_year_id` | INT (FK) | ูุฑุฌุน ููุนุงู | 1 |
| ุงูุตู | `grade_level_id` | INT (FK) | ูุฑุฌุน ููุตู | 1 (ุฃูู ุซุงููู) |
| ุงููุงุฏุฉ | `subject_id` | INT (FK) | ูุฑุฌุน ูููุงุฏุฉ | 1 (ุฑูุงุถูุงุช) |
| ููุน ุงูุชูููู | `exam_type_id` | TINYINT (FK) | **ุชู ุงูุชุญุฏูุซ (v4.0)** โ ุฑุงุจุท `lookup_exam_types` | 1 (MONTHLY) |
| ุฏุฑุฌุฉ ุงูุงุฎุชุจุงุฑ | `max_exam_score` | DECIMAL(5,2) | ุงูุฏุฑุฌุฉ ุงูุนุธูู ููุงุฎุชุจุงุฑุงุช | 20.00 |
| ุฏุฑุฌุฉ ุงููุงุฌุจุงุช | `max_homework_score` | DECIMAL(5,2) | ุงูุฏุฑุฌุฉ ุงูุนุธูู ูููุงุฌุจุงุช | 5.00 |
| ุฏุฑุฌุฉ ุงูููุงุธุจุฉ | `max_attendance_score` | DECIMAL(5,2) | ุงูุฏุฑุฌุฉ ุงูุนุธูู ููููุงุธุจุฉ | 5.00 |
| ุฏุฑุฌุฉ ุงููุดุงุท | `max_activity_score` | DECIMAL(5,2) | ุงูุฏุฑุฌุฉ ุงูุนุธูู ูููุดุงุท | 5.00 |
| ุฏุฑุฌุฉ ุงููุณุงููุฉ | `max_contribution_score` | DECIMAL(5,2) | ุงูุฏุฑุฌุฉ ุงูุนุธูู ูููุณุงููุฉ/ุงูุณููู | 0.00 |
| ุณูุงุณุฉ ุงูุชุฑุงุถูุฉุ | `is_default` | BOOLEAN | **ุฌุฏูุฏ** โ ูู ูู ุงูุณูุงุณุฉ ุงูุงูุชุฑุงุถูุฉ | TRUE |
| ุฏุฑุฌุฉ ุงููุฌุงุญ | `passing_score` | DECIMAL(5,2) | ุงููุณุจุฉ ุงููุฆููุฉ ูููุฌุงุญ | 50.00 |

### ุฌูุจ ุณูุงุณุฉ ูุงุฏุฉ ูุนููุฉ ูุตู ูุนูู
```sql
SELECT 
    s.name_ar AS subject_name,
    gl.name_ar AS grade_level,
    gp.max_exam_score,
    gp.max_homework_score,
    gp.max_attendance_score,
    gp.passing_score
FROM grading_policies gp
JOIN subjects s ON gp.subject_id = s.id
JOIN grade_levels gl ON gp.grade_level_id = gl.id
WHERE gp.academic_year_id = 1 AND gp.grade_level_id = 1;
```

---

## ๐งฉ ุนูุงุตุฑ ุชูููุฉ ุฅุถุงููุฉ ููุซูุฉ
- ุฌุฏูู `grading_policies` ูุญุชูู ุฃูุถุงู ุนูู:
  - `created_by_user_id` (FK โ `users`) ูุชูุซูู ูู ุฃูุดุฃ ุงูุณูุงุณุฉ.
  - `created_at`, `updated_at` ูุชุชุจุน ุงูุชุนุฏููุงุช.
- ููุฌุฏ ููุฏ ูุฑูุฏ `uk_policy` ูููุน ุชูุฑุงุฑ ุณูุงุณุฉ ูููุณ (`academic_year_id`, `grade_level_id`, `subject_id`, `exam_type_id`).
- ููุฌุฏ ุฌุฏูู `grading_policy_custom_components` ูุฅุถุงูุฉ ููููุงุช ุชูููู ุฎุงุตุฉ ุจูู ูุฏุฑุณุฉ (ูุซู: ุณูููุ ูุดุฑูุนุ ููุงุฑุงุช ุนูููุฉ...).

### 3๏ธโฃ ุฌุฏูู ุชูููู ุงููุนูููู (teacher_assignments) โ ุฌุฏูุฏ (v4.0)
ูุฑุจุท ุงููุนูู ุจููุงุฏ ููุตูู ูุญุฏุฏุฉ ููุนุงู ุงูุฏุฑุงุณู. ูุณุชุฎุฏู ูุชูููุฏ ุงููุตูู ูุชุญุฏูุฏ ุงููุณุคูููุงุช.

| ุงูุญูู | ุงููุตู |
|-------|-------|
| `teacher_id` | ุงููุนูู (FK โ employees) |
| `subject_id` | ุงููุงุฏุฉ |
| `classroom_id` | ุงูุดุนุจุฉ (NULL = ูู ุงูุดุนุจ) |
| `academic_year_id` | ุงูุนุงู ุงูุฏุฑุงุณู |
| `is_primary` | ูู ูู ุงููุนูู ุงูุฃุณุงุณู |

**ุชู ุงูุชุญุฏูุซ:** 2026-02-19 (v4.0)

**ุชู ุงูุชุญุฏูุซ:** 2026-02-14
