# ๐ ูุธุงู ุงูุฏุฑุฌุงุช ูุงูุชูููู ุงูุฐูู (SGAS)
## ุงููุณุฎุฉ 3.3 - ูููู ูุฑู ูุงุจู ููุชุฎุตูุต ๐๏ธ

---

## ๐ ุจุทุงูุฉ ุงููุธุงู
| ุงูุจูุฏ | ุงููููุฉ |
|-------|--------|
| **ุงููููุฏุณ ุงููุตูู** | ุนูุงุฑ ุงูุดุนูุจู |
| **ุงููููุฏุณ ุงููุนุชูุฏ** | ููุณู ุงูุนูุงุถู (Senior Architect) |
| **ูุญุฑู ุงูุชุทููุฑ** | Antigravity AI |
| **ุงูุญุงูุฉ** | โญโญโญโญโญ (Intelligence Grade) |
| **ูููุงุช DDL** | 8 ูููุงุช ูููุณููุฉ (ุงูุธุฑ ุฃุฏูุงู) |

---

## ๐ ุงูููุฏูุฉ
ุงูุชุนููู ูู "ุงูููุชุฌ" ุงูุฃุณุงุณู ูููุฏุฑุณุฉุ ูุงูุฏุฑุฌุงุช ูู ูููุงุณ ุฌูุฏุชู. ูุธุงู ุงูุชุนููู ูุงูุฏุฑุฌุงุช ูู ุงููุตูุน ุงูุฐู ุชุฏุงุฑ ููู ุงูุนูููุฉ ุงูุชุนููููุฉุ ูู ุชุญุถูุฑ ุงูุฏุฑูุณุ ูุดุฑุญูุงุ ูุงุฎุชุจุงุฑ ุงูุทูุงุจ ูููุงุ ูุญุชู ุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ุงูููุงุฆูุฉ. ุตููู ูุฐุง ุงููุธุงู ููุถูู ุญู ุงูุทุงูุจ ูู ุชูููู ุนุงุฏูุ ูุญู ุงููุนูู ูู ุชูุธูู ููุชูุ ูุญู ููู ุงูุฃูุฑ ูู ูุนุฑูุฉ ูุณุชูู ุงุจูู ุจูุถูุญ.

## โ ูุงุฐุง ููุฏูู ูุฐุง ุงููุธุงูุ
ูุบุทู ุงูุฏูุฑุฉ ุงูุฃูุงุฏูููุฉ ุงููุงููุฉ:
- **ูููุนูู:** ุฃุฏุงุฉ ูุชูุธูู ุงูุฌุฏููุ ุชุญุถูุฑ ุงูุฏุฑูุณุ ูุฑุตุฏ ุงูุฏุฑุฌุงุช ุจุณูููุฉ.
- **ููุทุงูุจ:** ูุนุฑูุฉ ูุงุฌุจุงุชู ููุชุงุฆุฌ ุงุฎุชุจุงุฑุงุชู ุฃููุงู ุจุฃูู.
- **ููุฅุฏุงุฑุฉ:** ูุฑุงูุจุฉ ุณูุฑ ุงูููุงูุฌ ูุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ุจุฏูุฉ ูุชูุงููุฉ ุฏูู ุฃุฎุทุงุก ุงูุฌูุน ุงููุฏูู.

## ๐ ุงูููุงุฆุฏ ุงูููููุณุฉ
- **ุตูุฑ ุฃุฎุทุงุก ุญุณุงุจูุฉ:** ุงููุธุงู ูุฌูุน ุงูุฏุฑุฌุงุช ููุญุณุจ ุงููุนุฏูุงุช ูุงููุณุจ ุงููุฆููุฉ ุขููุงู.
- **ุณุฑุนุฉ ุฅุตุฏุงุฑ ุงููุชุงุฆุฌ:** ุงูุดูุงุฏุงุช ุฌุงูุฒุฉ ููุทุจุงุนุฉ ููุฑ ุงูุชูุงุก ุขุฎุฑ ุงุฎุชุจุงุฑ.
- **ุญุณุงุจ ุงูููุงุธุจุฉ ุขููุงู:** ุฏุฑุฌุฉ ุงูููุงุธุจุฉ ุชูุญุณุจ ูู ูุธุงู ุงูุญุถูุฑ ูุจุงุดุฑุฉ โ ูุง ุฅุฏุฎุงู ูุฏูู.
- **ูุชูุฌุฉ ุงูุนุงู ุงูุดุงููุฉ:** ูุฌููุน ุงููุตููู + ุงููุณุจุฉ + ุงูุชุฑุชูุจ + ูุฑุงุฑ ุงูููู ูู ููุงู ูุงุญุฏ.

---

## ๐ ูููู ุงููููุงุช (v3.3)

```
05_ุงูุชุนููู_ูุงูุฏุฑุฌุงุช/
โโโ DDL.sql                  โ ููู Master (ุชูุซูู ุชุฑุชูุจ ุงูุชูููุฐ)
โโโ DDL_POLICIES.sql         โ 1๏ธโฃ ุณูุงุณุงุช ุงูุฏุฑุฌุงุช ูุงูุฃูุฒุงู
โโโ DDL_EXAMS.sql            โ 2๏ธโฃ ุงููุชุฑุงุช ุงูุงูุชุญุงููุฉ + ุงูุฌุฏุงูู + ุงูุฏุฑุฌุงุช
โโโ DDL_HOMEWORKS.sql        โ 3๏ธโฃ ุงููุงุฌุจุงุช (ูุจุณุท: ููุฐ/ูู ูููุฐ + ุฏุฑุฌุฉ ูุฏููุฉ)
โโโ DDL_MONTHLY.sql          โ 4๏ธโฃ ุงููุญุตูุงุช ุงูุดูุฑูุฉ + ุญุณุงุจ ุขูู
โโโ DDL_RESULTS.sql          โ 5๏ธโฃ ูุชุงุฆุฌ ุงููุตู + ุงูุนุงู + ุงูููู ๐
โโโ DDL_LESSON_PREP.sql      โ 6๏ธโฃ ุชุญุถูุฑ ุงูุฏุฑูุณ
โโโ DDL_AUDIT.sql            โ 7๏ธโฃ ุงูุชุฏููู ูุงูุญูููุฉ
โโโ DEMO_DATA.sql            โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุงููุฉ
โโโ README_END_TO_END_EXAMPLE.md โ ุดุฑุญ ุนููู ูู ุงูุฃูู ูููุงุก (10 ุณุฌูุงุช)
โโโ README.md                โ ูุฐุง ุงูููู
```

---

## ๐ ููู ูุนูู ุงููุธุงูุ (ุงููุณุงุฑ ุงููุงูู)

```
ุงูุชุฎุทูุท โ ุงูุชูููุฐ โ ุงูุชูููู ุงูุดูุฑู โ ูุชูุฌุฉ ุงููุตู โ ูุชูุฌุฉ ุงูุนุงู โ ูุฑุงุฑ ุงูููู
```

1. **ุงูุชุฎุทูุท:** ุณูุงุณุงุช ุงูุฏุฑุฌุงุช ุชูุญุฏุฏ ููู ุตู ููุงุฏุฉ (`grading_policies`)
2. **ุงูุชูููุฐ:** ุงููุนูู ูุญุถูุฑ ุฏุฑูุณู ููุนุทู ูุงุฌุจุงุช ูุฑุชุจุทุฉ ุจุงููุงุฏุฉ ูุงููุตู
3. **ุงูุฑุตุฏ ุงูุดูุฑู:** ุงูุงุฎุชุจุงุฑุงุช + ุงููุงุฌุจุงุช + ุงูููุงุธุจุฉ + ุงููุดุงุท + ุงููุณุงููุฉ + ุงูููููุงุช ุงููุฎุตุตุฉ โ `monthly_grades`
4. **ูุชูุฌุฉ ุงููุตู:** ูุฌููุน ุงููุญุตูุงุช ุงูุดูุฑูุฉ + ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู โ `semester_grades`
5. **ูุชูุฌุฉ ุงูุนุงู:** ุงููุตู ุงูุฃูู + ุงููุตู ุงูุซุงูู โ `annual_grades`
6. **ูุฑุงุฑ ุงูููู:** ุญุณุจ ููุงุนุฏ ูุฎุตุตุฉ ููู ุตู/ุนุงู (`grading_outcome_rules`) โ `annual_result`

---

## ๐ ููุฎุต ุงูุฌุฏุงูู ูุงูุนูุงุตุฑ

| ุงูููู | ุงูุนูุงุตุฑ | ุงูุนุฏุฏ |
|-------|---------|-------|
| DDL_POLICIES | `grading_policies`, `lookup_grading_statuses`, `grading_policy_custom_components` | 3 ุฌุฏุงูู |
| DDL_EXAMS | `exam_periods`, `exam_schedules`, `student_exam_scores`, `exam_session_periods` | 4 ุฌุฏุงูู + 1 View + 1 Proc + Triggers ุญูููุฉ |
| DDL_HOMEWORKS | `lookup_homework_types`, `homeworks`, `student_homeworks` + Views + `sp_populate_student_homeworks` | 1 Lookup + 2 ุฌุฏุงูู + 2 Views + 1 Proc + Triggers ุชุญูู |
| DDL_MONTHLY | `monthly_grades`, `monthly_custom_component_scores` + `v_auto_attendance_score`, `v_auto_homework_score` + `sp_calculate_monthly_grades` | 2 ุฌุฏุงูู + 2 Views + 1 Proc + Triggers |
| DDL_RESULTS | `semester_grades`, `annual_grades`, `annual_result`, `lookup_annual_statuses`, `lookup_promotion_decisions`, `grading_outcome_rules` + `v_sgas_class_ranking` + 3 Procedures | 6 ุฌุฏุงูู + 1 View + 3 Procs |
| DDL_LESSON_PREP | `lesson_preparation` | 1 ุฌุฏูู |
| DDL_AUDIT | `student_grade_audit` + 5 Triggers | 1 ุฌุฏูู + 5 Triggers |
| DDL_REPORTS | `v_rpt_monthly_subject_details`, `v_rpt_monthly_student_summary` + `fn_get_grade_description` | 2 Views + 1 Function |
| **ุงูุฅุฌูุงูู** | | **ูููุฐุฌ ูุฑู ูุน ููููุงุช ุชูููู ูุงุจูุฉ ููุชุฎุตูุต ููู ูุฏุฑุณุฉ** |

---

## ๐ ุงูุฃูุธูุฉ ุงููุฑุชุจุทุฉ (Dependencies)

```mermaid
graph LR
    S01["System 01<br/>ุงูุตูุงุญูุงุช"] --> S05
    S02["System 02<br/>ุงูููุงุฉ ุงูุฃูุงุฏูููุฉ"] --> S05
    S04["System 04<br/>ุงูุทูุงุจ + ุงูุญุถูุฑ"] --> S05["System 05<br/>ุงูุชุนููู ูุงูุฏุฑุฌุงุช"]
    S05 --> S17["System 17<br/>ุงูุดูุงุฏุงุช"]
    S05 --> S16["System 16<br/>ุงูุชูุงุฑูุฑ"]
    S08["System 08<br/>ูุฌุงู ุงูุงูุชุญุงูุงุช"] <--> S05
```

| ุงููุธุงู | ุงูุนูุงูุฉ | ุงูุชูุงุตูู |
|--------|---------|----------|
| **System 01 โ ุงูุตูุงุญูุงุช** | ููุฑุฃ ููู | `users` (ูู ุฃูุดุฃ / ูู ุงุนุชูุฏ) |
| **System 02 โ ุงูููุงุฉ** | ููุฑุฃ ููู | `academic_years`, `semesters`, `academic_months`, `grade_levels`, `classrooms`, `subjects` |
| **System 04 โ ุงูุทูุงุจ** | ููุฑุฃ ููู | `student_enrollments`, `student_attendance` (ุญุณุงุจ ุงูููุงุธุจุฉ ุขููุงู) |
| **System 08 โ ูุฌุงู ุงูุงูุชุญุงูุงุช** | ุชูุงูู ุซูุงุฆู | `exam_session_periods` ุชุฑุจุท ุงููุชุฑุงุช ุงูุงูุชุญุงููุฉ ุจุงูุฌูุณุงุช ุงูููุฌุณุชูุฉ |
| **System 16 โ ุงูุชูุงุฑูุฑ** | ููุฑุฃ ูู S05 | `v_report_grades_detailed` ูุนุฑุถ ุฏุฑุฌุงุช ุงูุทูุงุจ |
| **System 17 โ ุงูุดูุงุฏุงุช** | ููุฑุฃ ูู S05 | `v_certificate_data_primary` ูุฌููุน ุจูุงูุงุช ุงูุดูุงุฏุฉ |

---

## ๐ ูุธุงู ุงููุงุฌุจุงุช (ุงููุจุณูุท)

### ุงูููุฑุฉ
ุงููุนูู ูููุดุฆ ูุงุฌุจ ูุฑุชุจุท ุจู**ุงููุงุฏุฉ + ุงููุตู + ุงูุดูุฑ**ุ ุซู ูุญุฏุฏ ููู ุทุงูุจ:
- โ **ูููุฐ** (`is_completed = TRUE`) โ ุงูุฏุฑุฌุฉ = `max_grade` ุขููุงู
- โ **ูู ููููุฐ** (`is_completed = FALSE`) โ ุงูุฏุฑุฌุฉ = 0
- โ๏ธ **ุฏุฑุฌุฉ ูุฏููุฉ** (`manual_grade`) โ ุฅุฐุง ุฃุฑุงุฏ ุงููุนูู ุชูููู ูุฎุชูู

### ุงููุนุงุฏูุฉ
```
ุฏุฑุฌุฉ_ุงููุงุฌุจ_ุงููุนููุฉ = manual_grade ุฅุฐุง ููุฌูุฏุฉ
                      = max_grade ุฅุฐุง ูููุฐ
                      = 0 ุฅุฐุง ูู ููููุฐ

ุฏุฑุฌุฉ_ุงููุงุฌุจุงุช_ุงูุดูุฑูุฉ = (ูุฌููุน ุงูุฏุฑุฌุงุช ุงููุนููุฉ รท ุงููุฌููุน ุงูุฃูุตู) ร max_homework_score
```

---

## ๐งฎ ูุนุงุฏูุงุช ุงูุญุณุงุจ ุงูุขูู

### ุงููุญุตูุฉ ุงูุดูุฑูุฉ
```
monthly_total = attendance_score (ูู ุงูุญุถูุฑ ุขููุงู)
              + homework_score (ูู ุงููุงุฌุจุงุช ุขููุงู)
              + activity_score (ูุฏูู ูู ุงููุนูู)
              + contribution_score (ูุฏูู ูู ุงููุนูู)
              + custom_components_score (ูู ููููุงุช ุงูุณูุงุณุฉ ุงููุฎุตุตุฉ)
              + exam_score (ูู ุงูุงุฎุชุจุงุฑุงุช)
```

### ูุชูุฌุฉ ุงููุตู
```
semester_work_total = ูุฌููุน monthly_total ูุฃุดูุฑ ุงููุตู
semester_total = semester_work_total + final_exam_score
```

### ูุชูุฌุฉ ุงูุนุงู
```
annual_total = semester1_total + semester2_total
annual_percentage = (annual_total รท ุงูุฏุฑุฌุฉ_ุงูุนุธูู) ร 100

ุฅุฐุง annual_percentage >= passing_score โ ูุงุฌุญ
ูุฅูุง โ ุฑุงุณุจ
```

### ูุฑุงุฑ ุงูููู
```
ุงูููู ุงูุงูุชุฑุงุถูุฉ:
0 ููุงุฏ ุฑุงุณุจ       โ ูููู ููุตู ุงูุชุงูู
1-2 ููุงุฏ ุฑุงุณุจ     โ ูููู ุจุดุฑูุท (ูููู)
ุฃูุซุฑ ูู 2 ุฑุงุณุจ    โ ูุนูุฏ ุงูุณูุฉ

ููููู ุชุฎุตูุต ูุฐู ุงูุญุฏูุฏ ูู ุฌุฏูู `grading_outcome_rules`.
```

---

## โก ุงูุชูููุฐ ุงูุณุฑูุน

```sql
-- 1. ุชูููุฐ ุงูุฌุฏุงูู ุจุงูุชุฑุชูุจ
SOURCE DDL_POLICIES.sql;
SOURCE DDL_EXAMS.sql;
SOURCE DDL_HOMEWORKS.sql;
SOURCE DDL_MONTHLY.sql;
SOURCE DDL_RESULTS.sql;
SOURCE DDL_LESSON_PREP.sql;
SOURCE DDL_AUDIT.sql;
SOURCE DDL_REPORTS.sql;

-- 2. ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
SOURCE DEMO_DATA.sql;

-- 3. ุญุณุงุจ ุงููุญุตูุงุช ุงูุดูุฑูุฉ ุขููุงู
CALL sp_calculate_monthly_grades(1, 1, 1);  -- (month_id, subject_id, classroom_id)

-- 4. ุญุณุงุจ ูุฌุงููุน ุงููุตู
CALL sp_calculate_semester_totals(1, 1, 1);  -- (semester_id, subject_id, classroom_id)

-- 5. ุญุณุงุจ ุงููุชุงุฆุฌ ุงูุณูููุฉ + ุงูุชุฑุชูุจ + ูุฑุงุฑ ุงูููู
CALL sp_calculate_annual_results(1, 1);  -- (academic_year_id, classroom_id)
```

---

## ๐ ุงูุญูููุฉ ูุงูุฃูุงู
- **ุทุจูุฉ Triggers ุญูููุฉ** ุชููุน ุชุนุฏูู ุงูุญููู ุงูุฌููุฑูุฉ ุจุนุฏ ุงูุงุนุชูุงุฏ
- **ุณุฌู ุชุฏููู** ููุซูู ูู ุชุนุฏูู ุนูู ุงูุฏุฑุฌุงุช ูุน ุงุณู ุงููุนุฏูู ูุงููููุฉ ุงููุฏููุฉ/ุงูุฌุฏูุฏุฉ
- **ุญุงูุงุช ุงูุงุนุชูุงุฏ:** ูุณูุฏุฉ โ ููุฏ ุงููุฑุงุฌุนุฉ โ ูุนุชูุฏ โ ูุฑุญู ููุฃุฑุดูู
- **ููู ุงููุชุฑุงุช ุงูุงูุชุญุงููุฉ** (`is_locked`) ูููุน ุชุนุฏูู ุงูุฏุฑุฌุงุช ุจุนุฏ ุงูุงุนุชูุงุฏ
