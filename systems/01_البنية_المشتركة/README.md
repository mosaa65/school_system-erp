# ๐ ูุธุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุดุชุฑูุฉ (Shared Infrastructure)

> **"ุงูุนูู ุงููุฏุจุฑ" ูููุฏุฑุณุฉ ุงูุฑูููุฉ ูุงูุญุตู ุงูุฃููู ููุจูุงูุงุช**

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช
1. [ุงูููุฏูุฉ ูุงูุฑุคูุฉ](#-ุงูููุฏูุฉ)
2. [ูุงุฐุง ููุฏู ูุฐุง ุงููุธุงูุ](#-ูุงุฐุง-ููุฏู-ูุฐุง-ุงููุธุงู)
3. [ุงูููุงุฆุฏ ูุงููููุฉ](#-ุงูููุงุฆุฏ-ุงูููููุณุฉ)
4. [ุณููุงุฑูููุงุช ูุงูุนูุฉ](#-ุฃูุซูุฉ-ูุงูุนูุฉ-ูู-ุฏุงุฎู-ุงููุฏุฑุณุฉ)
5. [ุงููุงููุณ ุงูุชููู ููุจูุงูุงุช (Technical Data Dictionary)](#-ุงููุงููุณ-ุงูุชููู-ููุจูุงูุงุช)
    - [ุงููุณู 1: ุงูุฌุฏุงูู ุงููุฑุฌุนูุฉ (Lookups)](#-ุงููุณู-1-ุงูุฌุฏุงูู-ุงููุฑุฌุนูุฉ-lookup-tables)
    - [ุงููุณู 2: ุงูุฃูุงู ูุงูุตูุงุญูุงุช (RBAC)](#-ุงููุณู-2-ุงูุฃูุงู-ูุงูุตูุงุญูุงุช-rbac)
    - [ุงููุณู 3: ุงูุฌุบุฑุงููุง (Geography)](#-ุงููุณู-3-ุงูุฌุบุฑุงููุง-geography)
    - [ุงููุณู 4: ุงูุฅุนุฏุงุฏุงุช ูุงูุชูููู](#-ุงููุณู-4-ุงูุฅุนุฏุงุฏุงุช-ูุงูุชูููู)
6. [ุชุญููู ูุนูุงุฑู ููุฑุงุฌุนุฉ ุงูุฌูุฏุฉ](#-ุชุญููู-ูุนูุงุฑู-ููุฑุงุฌุนุฉ-ุงูุฌูุฏุฉ)

---

## ๐ ุงูููุฏูุฉ
ูู ุนุตุฑ ุงูุชุญูู ุงูุฑูููุ ูุง ุชุญุชุงุฌ ุงููุฏุฑุณุฉ ููุท ุฅูู ุชุฎุฒูู ุงูุจูุงูุงุชุ ุจู ุฅูู "ุนูู ูุฏุจุฑ" ููุธู ูู ูุญู ูู ุฑุคูุฉ ูุงุฐุงุ ูููู ุชุชุฑุงุจุท ุงููุนูููุงุช ุจุจุนุถูุง. ูุธุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุดุชุฑูุฉ ูู ุญุฌุฑ ุงูุฃุณุงุณ ุงูุฐู ูุถูู ุฃูุงู ุงููุฏุฑุณุฉ ุงูุฑููู ูุชูุญูุฏ ูุบุฉ ุงูุชุนุงูู ุจูู ุฌููุน ุงูุฃูุณุงู. ูุฐุง ุงููุธุงู ููุณ ูุฌุฑุฏ "ุฅุนุฏุงุฏุงุช"ุ ุจู ูู ุงูุฃุฑุถูุฉ ุงูุตูุจุฉ ุงูุชู ุชุจูู ุนูููุง ูุงูุฉ ุงูุฃูุธูุฉ ุงูุฃุฎุฑู (ุงูุทูุงุจุ ุงูุฏุฑุฌุงุชุ ุงููุงููุฉ).

## ๐ฏ ูุงุฐุง ููุฏู ูุฐุง ุงููุธุงูุ
ูููู ูุฐุง ุงููุธุงู ุจูููุชูู ุญูููุชูู:
1.  **ุงูุณูุทุฑุฉ ุงููุงููุฉ:** ุชุญุฏูุฏ ุฏููู ููู ูุฏุฎู ุงููุธุงู ููุงุฐุง ููููู ุฃู ููุนู (ูุฏูุฑุ ูุนููุ ูููู) ุนุจุฑ ูุธุงู RBAC ูุชุทูุฑ.
2.  **ุชูุญูุฏ ุงููุนุงููุฑ:** ุถูุงู ุฃู ุงูุฌููุน ูุณุชุฎุฏููู ููุณ ุงููุณููุงุช (ุงููุญุงูุธุงุชุ ุฃููุงุน ุงููุฏุงุฑุณุ ุงููุณููุงุช ุงููุธูููุฉ) ูููุน ุงูุนุดูุงุฆูุฉ ูู ุงูุจูุงูุงุช.

---

## ๐ ุงูููุงุฆุฏ ุงูููููุณุฉ
*   **ุฃูุงู ุจูุณุจุฉ 100%:** ูุง ูููู ูุฃุญุฏ ุฏุฎูู ุตูุญุงุช ุบูุฑ ูุฎุตุตุฉ ูู (ุทุงูุจ ูุง ูุฑู ุฏุฑุฌุงุช ุบูุฑูุ ูุนูู ูุง ูุฑู ุฑูุงุชุจ).
*   **ุชุชุจุน ุฏููู (Audit Trail):** ูุนุฑูุฉ "ูู ูุงู ุจูุงุฐุง ููุชู" ุนุจุฑ ุณุฌู ุงูุชุฏูููุ ููุง ูููู ุฒูู "ูุณุช ุฃูุง".
*   **ููุน ุชูุฑุงุฑ ุงูุจูุงูุงุช:** ุฅุฏุฎุงู ุงููุณููุงุช (ูุซู ุฃุณูุงุก ุงููุฏู) ูุฑุฉ ูุงุญุฏุฉ ูุงุณุชุฎุฏุงููุง ูู ูู ุงูุฃูุธูุฉ.
*   **ุงูุงุญุชุฑุงููุฉ:** ูุธูุฑ ุงูุชูุงุฑูุฑ ุจุดูู ููุญุฏ ุจุดุนุงุฑ ุงููุฏุฑุณุฉุ ุงูุชุฐููู ุงูุฑุณููุ ูุงูุชูุงุฑูุฎ ุงูุฏูููุฉ.

## ๐ ุงูููุงุฆุฏ ุงูุฅุฏุงุฑูุฉ (ุฑุงุญุฉ ุงูุจุงู)
*   **ุงูุงุณุชูุฑุงุฑ:** ุฃุณุงุณ ูุชูู ูููุน ุงูููุงุฑ ุงูุจูุงูุงุช ุฃู ุชุฏุงุฎููุง ุนูุฏ ุชูุณุน ุงููุฏุฑุณุฉ.
*   **ุงููุฑููุฉ:** ุฅููุงููุฉ ุฅุถุงูุฉ "ูุจูู ุฌุฏูุฏ" ุฃู "ููุน ูุธููุฉ ุฌุฏูุฏ" ุจุถุบุทุฉ ุฒุฑ ุฏูู ุงูุญุงุฌุฉ ููุจุฑูุฌ.

---

## ๐ฌ ุฃูุซูุฉ ูุงูุนูุฉ ูู ุฏุงุฎู ุงููุฏุฑุณุฉ

| ุงูุณููุงุฑูู | ุงูุทุฑููุฉ ุงูุชูููุฏูุฉ | ูุน ูุธุงููุง ุงูุฐูู |
|-----------|-------------------|-----------------|
| **ุชุนููู ูููู ุฌุฏูุฏ** | ุงููุฏูุฑ ูุณูู ุงููููู ุฏูุงุชุฑ ููููุงุช ุณุฑ ูุชุนุฏุฏุฉ ููุฏ ููุณู ุณุญุจ ุจุนุถูุง ูุงุญูุงู. | ุงููุฏูุฑ ููุดุฆ ุญุณุงุจุงู ููููุญู ุฏูุฑ "ูููู"ุ ููุฑุซ ููุฑุงู ูู (ูููุท) ุตูุงุญูุงุช ุงูููููุ ููููู ุฅููุงูู ุจุถุบุทุฉ ุฒุฑ. |
| **ุฎุทุฃ ูู ุงูุฏุฑุฌุงุช** | "ูู ุดุทุจ ุฏุฑุฌุฉ ุงูุทุงูุจ ุฃุญูุฏุ" .. ูุง ุฃุญุฏ ูุนุชุฑู. | ุงููุฏูุฑ ููุชุญ ุณุฌู ุงูุชุฏููู: "ุงููุณุชุฎุฏู (ููุฏ) ูุงู ุจุชุนุฏูู ุงูุฏุฑุฌุฉ ูู 90 ุฅูู 50 ููู ุงูุณุจุช ุงูุณุงุนุฉ 10:00". |
| **ุนููุงู ุงูุทุงูุจ** | ูู ุฅุฏุงุฑู ููุชุจ ุงูุนููุงู ุจูุฒุงุฌู: "ุดุงุฑุน 10"ุ "ุญู ุงูุฒููุฑ"ุ "ุฌูุงุฑ ุงูุจูุงูุฉ". | ููุงุฆู ููุณุฏูุฉ ููุญุฏุฉ: (ูุญุงูุธุฉ ุฅุจ -> ูุฏูุฑูุฉ ุงูุนุฏูู -> ุนุฒูุฉ ุจูู ุนูุงุถ -> ูุฑูุฉ ุงููุฎูุฉ). ุจูุงูุงุช ุฏูููุฉ 100%. |

---

## ๐๏ธ ุงููุฎุทุท ุงูููููู (Architecture Review)

ููุถุญ ุงููุฎุทุท ุงูุชุงูู ููู ูุฎุฏู ูุฐุง ุงููุธุงู ุจููุฉ ุงูุฃูุธูุฉ:

```mermaid
graph TD
    %% ุงูุนูุฏ ุงูุฃุณุงุณูุฉ
    Sys01[๐ 01. ุงูุจููุฉ ุงููุดุชุฑูุฉ]
    Sys02[๐ 02. ุงูููุงุฉ ุงูุฃูุงุฏูููุฉ]
    Sys04[๐ฅ 04. ุงูุทูุงุจ]
    Sys08[๐ 08. ุงูุงูุชุญุงูุงุช]
    Sys06[๐ 06. ุงูุฅุฏุงุฑุฉ]

    %% ุงูุนูุงูุงุช ุงูููุจุซูุฉ ูู System 01
    Sys01 -->|ุชููุฑ ุงููุจุงูู| Sys02
    Sys01 -->|ุชููุฑ ุงููุจุงูู| Sys08
    Sys01 -->|ุชููุฑ ุงูุนูุงููู ุงูุฌุบุฑุงููุฉ| Sys04
    Sys01 -->|ุชููุฑ ุงูุตูุงุญูุงุช ูุงููุณุชุฎุฏููู| Sys06
    Sys01 -->|ุชููุฑ ุงูุฌุฏุงูู ุงููุฑุฌุนูุฉ| Sys02

    %% ูุตู ุงูุนูุงูุงุช ุฏุงุฎู ุงูุนูุฏ
    subgraph "System 01 Components"
        Geo[๐ ุงูุฌุบุฑุงููุง]
        Users[๐ ุงููุณุชุฎุฏููู]
        Lookups[๐ ุงูููุงุฆู]
        Settings[โ๏ธ ุงูุฅุนุฏุงุฏุงุช]
    end
    
    Geo --> Sys04
    Users --> Sys06
    Lookups --> Sys02
```

---

## ๐ก ููู ูุณุชุฎุฏู ุงููุจุฑูุฌ ูุฐุง ุงููุธุงูุ (SQL Examples)

ุฅููู ุฃูุซูุฉ ุญููููุฉ ูุทุฑููุฉ ุงูุงุณุชูุงุฏุฉ ูู ูุฐู ุงูุฌุฏุงูู ูู ุงูุงุณุชุนูุงูุงุช:

### 1. ุฌูุจ ุงูุนููุงู ุงููุงูู ููุทุงูุจ (ุจุฏูู ุฃู ุชูุฑุงุฑ ูุตู)
```sql
SELECT 
    s.student_name,
    g.name_ar AS governorate,
    d.name_ar AS directorate,
    sub.name_ar AS sub_district,
    v.name_ar AS village
FROM students s
JOIN governorates g ON s.governorate_id = g.id
JOIN directorates d ON s.directorate_id = d.id
JOIN sub_districts sub ON s.sub_district_id = sub.id
JOIN villages v ON s.village_id = v.id
WHERE s.id = 1001;
```

### 2. ูุนุฑูุฉ ูู ูุงู ุจุชุนุฏูู ุฏุฑุฌุฉ ุทุงูุจ ูุนูู
```sql
SELECT 
    audit.action,
    audit.old_values,
    audit.new_values,
    users.username,
    audit.created_at
FROM audit_log audit
JOIN users ON audit.user_id = users.id
WHERE audit.table_name = 'grades' 
AND audit.record_id = 550;
```

---

# ๐ ุงููุงููุณ ุงูุชููู ููุจูุงูุงุช (Data Dictionary)

ูููุง ููู ุชูุตูู ุดุงูู ููู ุฌุฏูู ูู ุงููุธุงูุ ูุน ุดุฑุญ ุงูุญููู ูุฃูุซูุฉ ุญูุฉ ููุจูุงูุงุช.

## ๐ท๏ธ ุงููุณู 1: ุงูุฌุฏุงูู ุงููุฑุฌุนูุฉ (Lookup Tables)
ุงูุบุฑุถ: ููุงุฆู ุซุงุจุชุฉ ุชุถูู ุชูุญูุฏ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ.

### 1๏ธโฃ ุฌุฏูู ุฃููุงุน ุงููุฏุงุฑุณ (`lookup_school_types`)
ุฃููุงุน ุงููุฏุงุฑุณ ุงูุชู ูุฏูุฑูุง ุงููุธุงู ูุถุจุท ุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ ุงููุชุงุญุฉ.

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | TINYINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู ุงููุฑูุฏ |
| `name_ar` | VARCHAR(50) | NO | - | - | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| `name_en` | VARCHAR(50) | YES | NULL | - | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |
| `created_at` | TIMESTAMP | YES | CUR_TIME | - | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

#### ๐ 10 ุณุฌูุงุช ุชุฌุฑูุจูุฉ (Live Data Examples)
| id | name_ar | name_en |
|----|---------|---------|
| 1 | ูุฏุฑุณุฉ ุฃุณุงุณูุฉ | Primary School |
| 2 | ูุฏุฑุณุฉ ุซุงูููุฉ | Secondary School |
| 3 | ูุฏุฑุณุฉ ูุฎุชูุทุฉ | Mixed School |
| 4 | ูุฏุฑุณุฉ ุชุญููุธ ูุฑุขู | Quranic School |
| 5 | ูุฏุฑุณุฉ ุฏูููุฉ | International School |
| 6 | ูุฏุฑุณุฉ ุฃูููุฉ ูููุฐุฌูุฉ | Private Model School |
| 7 | ุฑูุถุฉ ุฃุทูุงู | Kindergarten |
| 8 | ูุฏุฑุณุฉ ุชุฑุจูุฉ ุฎุงุตุฉ | Special Ed School |
| 9 | ูุฑูุฒ ูุญู ุฃููุฉ | Literacy Center |
| 10 | ูุนูุฏ ุชููู | Technical Institute |

---

### 2๏ธโฃ ุฌุฏูู ุงููุชุฑุงุช ุงูุฏุฑุงุณูุฉ (`lookup_periods`)
ูุชูุธูู ุงูุฏูุงู ุงููุฏุฑุณู ูุชูุฒูุน ุงูุฌุฏุงูู.

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | TINYINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู ุงูุฑููู |
| `name_ar` | VARCHAR(30) | NO | - | - | ุงุณู ุงููุชุฑุฉ |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |

#### ๐ 10 ุณุฌูุงุช ุชุฌุฑูุจูุฉ
| id | name_ar | ููุงุญุธุงุช |
|----|---------|---------|
| 1 | ุตุจุงุญูุฉ | ุงูุฏูุงู ุงูุฑุณูู ุงููุนุชุงุฏ |
| 2 | ูุณุงุฆูุฉ | ูููุฏุงุฑุณ ุงูููุชุธุฉ |
| 3 | ููุงููุง | ูุฏุฑุณุชูู ูู ูุจูู ูุงุญุฏ |
| 4 | ูุฑุฏูุฉ ุฃููู | 7:00 - 12:00 |
| 5 | ูุฑุฏูุฉ ุซุงููุฉ | 12:30 - 5:00 |
| 6 | ุฏูุงู ุตููู | ููุฃูุดุทุฉ |
| 7 | ุฏูุงู ุฑูุถุงูู | ุณุงุนุงุช ูุฎุชุตุฑุฉ |
| 8 | ุชูููุฉ ูุณุงุฆูุฉ | ุฏุฑูุณ ุฎุตูุตูุฉ |
| 9 | ุชุนููู ูุจุงุฑ | ูููู |
| 10 | ุนุทูุฉ ุฑุณููุฉ | ูุง ููุฌุฏ ุฏูุงู |

---

### 3๏ธโฃ ุฌุฏูู ุงููุคููุงุช ุงูุนูููุฉ (`lookup_qualifications`)
ูุณุชุฎุฏู ูู ูููุงุช ุงูููุธููู ูุชุญุฏูุฏ ุงูุฑุงุชุจ ูุงููุณุชูู ุงููุธููู.

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | TINYINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู |
| `name_ar` | VARCHAR(50) | NO | - | - | ุงุณู ุงููุคูู |
| `sort_order` | TINYINT UNSIGNED | YES | 0 | - | ุชุฑุชูุจ ุงูุนุฑุถ |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |

#### ๐ 10 ุณุฌูุงุช ุชุฌุฑูุจูุฉ
| id | name_ar | ุงูุชุฑุชูุจ |
|----|---------|---------|
| 1 |  ุฃูู | 1 |
| 2 | ููุฑุฃ ูููุชุจ (ุจุฏูู ุดูุงุฏุฉ) | 2 |
| 3 | ุดูุงุฏุฉ ุงููุญู (ุฃุณุงุณู) | 3 |
| 4 | ุดูุงุฏุฉ ุงูุซุงูููุฉ ุงูุนุงูุฉ | 4 |
| 5 | ุฏุจููู ูุชูุณุท (ุจุนุฏ ุงูุซุงูููุฉ) | 5 |
| 6 | ุฏุจููู ูุนูููู | 6 |
| 7 | ุจูุงููุฑููุณ ุชุฑุจูู | 7 |
| 8 | ุจูุงููุฑููุณ ุบูุฑ ุชุฑุจูู | 8 |
| 9 | ูุงุฌุณุชูุฑ | 9 |
| 10 | ุฏูุชูุฑุงู | 10 |

---

### 4๏ธโฃ ุฌุฏูู ุงููุจุงูู ุงููุฏุฑุณูุฉ (`lookup_buildings`) **(ุฌุฏูุฏ ๐)**
ูุชุญุฏูุฏ ูููุน ุงูุฅุชูุงูุงุช ูุงูุฅุตูุงุญุงุช ุจุฏูุฉ (ูุจูู ูุฏููุ ุฌุฏูุฏุ ููุญู).

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | TINYINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู |
| `name_ar` | VARCHAR(50) | NO | - | - | ุงุณู ุงููุจูู |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |

#### ๐ ุณุฌูุงุช ุชุฌุฑูุจูุฉ
| id | name_ar | ุงูุงุณุชุฎุฏุงู |
|----|---------|-----------|
| 1 | ุงููุฏุฑุณุฉ ุงููุฏููุฉ | ุงููุจูู ุงูุฑุฆูุณู ุงููุฏูู |
| 2 | ุงููุฏุฑุณุฉ ุงูุฌุฏูุฏุฉ | ูุจูู ุงููุตูู ุงูุฌุฏูุฏ |
| 3 | ุงูููุญู ุงูุฅุฏุงุฑู | ููุงุชุจ ุงูุฅุฏุงุฑุฉ |
| 4 | ุงููุนูู | ูุจูู ุงููุนุงูู |
| 5 | ุงููุณุฌุฏ | ูุตูู ุงููุฏุฑุณุฉ |
| 6 | ุงูุณูุฑ ุงูุฎุงุฑุฌู | ุงูุฃุณูุงุฑ ูุงูุจูุงุจุงุช |
| 7 | ุงูููุตู | ุจูููุฉ ุงููุฏุฑุณุฉ |
| 8 | ุณูู ุงููุนูููู | (ุฅู ูุฌุฏ) |
| 9 | ุงูุณุงุญุฉ | ุงูุทุงุจูุฑ ูุงูููุงุนุจ |
| 10 | ุฃุฎุฑู | ูุฑุงูู ุนุงูุฉ |

---

## ๐ ุงููุณู 2: ุงูุฃูุงู ูุงูุตูุงุญูุงุช (RBAC)
ูุธุงู **Role-Based Access Control** (ุงูุชุญูู ุจุงููุตูู ุงููุงุฆู ุนูู ุงูุฃุฏูุงุฑ).

### ๐ ุงููุฑู ุงูุฃููู ููุตูุงุญูุงุช
```mermaid
graph TD
    SuperAdmin[๐ ูุฏูุฑ ุงููุธุงู] -->|ูููู ูู ุงูุตูุงุญูุงุช| SchoolAdmin[๐ซ ูุฏูุฑ ุงููุฏุฑุณุฉ]
    SchoolAdmin -->|ูุฏูุฑ| Teachers[๐จโ๐ซ ุงููุนูููู]
    SchoolAdmin -->|ูุฏูุฑ| Employees[๐ผ ุงูููุธููู]
    SchoolAdmin -->|ูุฑุงูุจ| Students[๐ ุงูุทูุงุจ]
    
    subgraph "ุฃูุซูุฉ ุงูุตูุงุญูุงุช"
        Teachers -->|grade.create| Grades
        Employees -->|student.register| Registration
        Students -->|view.own.grades| Portal
    end
```

### 1๏ธโฃ ุฌุฏูู ุงููุณุชุฎุฏููู (`users`)
ุจูุงุจุฉ ุงูุฏุฎูู ูููุธุงู.

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | INT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู ุงููุฑูุฏ |
| `username` | VARCHAR(50) | NO | - | UK | ุงุณู ุงูุฏุฎูู |
| `email` | VARCHAR(100) | YES | NULL | UK | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| `password_hash` | VARCHAR(255) | NO | - | - | ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ |
| `employee_id` | INT UNSIGNED | YES | NULL | FK | ุงูููุธู ุงููุฑุชุจุท |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุญุณุงุจ |
| `last_login_at` | TIMESTAMP | YES | NULL | - | ุขุฎุฑ ุฏุฎูู |
| `failed_login` | TINYINT | YES | 0 | - | ุนุฏุฏ ุงููุญุงููุงุช ุงููุงุดูุฉ |
| `locked_until` | TIMESTAMP | YES | NULL | - | ุชุงุฑูุฎ ูู ุงูููู |
| `created_at` | TIMESTAMP | YES | CUR_TIME | - | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

#### ๐ 10 ุณุฌูุงุช ุชุฌุฑูุจูุฉ (ุณููุงุฑูููุงุช)
| id | username | role | ุงููุตู ูุงูุญุงูุฉ |
|----|----------|------|---------------|
| 1 | super.admin | Admin | ุงููุณุคูู ุงูุชููู (ูุง ูุญุฐู) |
| 2 | principal.user | Manager | ูุฏูุฑ ุงููุฏุฑุณุฉ (ูุงูู ุงูุตูุงุญูุงุช ุงูุฅุฏุงุฑูุฉ) |
| 3 | academic.agent | Agent | ุงููููู ุงูููู (ุฅุฏุงุฑุฉ ุงูุฌุฏุงูู ูุงูุฏุฑุฌุงุช) |
| 4 | student.affairs | Employee | ูููู ุดุคูู ุงูุทูุงุจ (ุบูุงุจุ ูููุงุช) |
| 5 | teacher.ahmed | Teacher | ูุนูู ุฑูุงุถูุงุช (ูุฑู ุฌุฏุงููู ูุทูุงุจู ููุท) |
| 6 | teacher.sara | Teacher | ูุนููุฉ ุนููู |
| 7 | accountant.ali | Accountant | ูุญุงุณุจ (ูุฑู ุงูุฑุณูู ูุงูุฑูุงุชุจ) |
| 8 | parent.hassan | Parent | ููู ุฃูุฑ (ูุฑู ุฏุฑุฌุงุช ุงุจูู ููุท) |
| 9 | student.omar | Student | ุทุงูุจ (ูุฑู ูุงุฌุจุงุชู ูุฏุฑุฌุงุชู) |
| 10 | guest.audit | Viewer | ูุฏูู ุฎุงุฑุฌู (ุนุฑุถ ููุท - Read Only) |

---

### 2๏ธโฃ ุฌุฏูู ุณุฌู ุงูุชุฏููู (`audit_log`) ๐ก๏ธ
"ุงูุตูุฏูู ุงูุฃุณูุฏ" ูููุธุงู. ูุณุฌู ูู ุญุฑูุฉ.

| ุงุณู ุงูุนููุฏ | ุงููุตู | ูุซุงู ูููู ุญููููุฉ |
|------------|-------|------------------|
| `user_id` | ูู ูุงู ุจุงููุนูุ | 5 (ุงููุนูู ุฃุญูุฏ) |
| `action` | ูุงุฐุง ูุนูุ | UPDATE |
| `table_name` | ุฃููุ | grades (ุฌุฏูู ุงูุฏุฑุฌุงุช) |
| `old_values` | ุงููููุฉ ูุจู | `{"score": 90}` |
| `new_values` | ุงููููุฉ ุจุนุฏ | `{"score": 95}` |
| `ip_address` | ูู ุฃู ุฌูุงุฒุ | 192.168.1.50 |

#### ๐ ูุซุงู ุญู ูู ุงูุณุฌู
| id | ุงูุชูููุช | ุงููุณุชุฎุฏู | ุงูุญุฏุซ | ุงูุชูุงุตูู |
|----|---------|----------|-------|----------|
| 501 | 10:00 AM | ุงููุฏูุฑ | LOGIN | ุชุณุฌูู ุฏุฎูู ูุงุฌุญ |
| 502 | 10:05 AM | ุงููุฏูุฑ | CREATE | ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ (ุญุงุฑุณ) |
| 503 | 10:15 AM | ุงููููู | UPDATE | ุชุนุฏูู ุบูุงุจ ุทุงูุจ (ูู ุบุงุฆุจ ุฅูู ุญุงุถุฑ) |
| 504 | 10:30 AM | ุงููุนูู | INSERT | ุฅุฏุฎุงู ุฏุฑุฌุงุช ุงูุดูุฑ ุงูุฃูู |
| 505 | 11:00 AM | ุงููุญุงุณุจ | DELETE | ุญุฐู ููุฏ ูุงูู (ุฎุทุฃ) - *ุงููุธุงู ูุญุชูุธ ุจุงููุณุฎุฉ ุงููุญุฐููุฉ* |

---

## ๐ ุงููุณู 3: ุงูุฌุบุฑุงููุง (Geography)
ูุฑู ุฌุบุฑุงูู ุฏููู (ูุญุงูุธุฉ -> ูุฏูุฑูุฉ -> ุนุฒูุฉ -> ูุฑูุฉ -> ูุญูุฉ).

### 1๏ธโฃ ุฌุฏูู ุงูุนุฒู (`sub_districts`)

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | SMALLINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู ุงููุฑูุฏ |
| `directorate_id` | SMALLINT UNSIGNED | NO | - | FK | ุงููุฏูุฑูุฉ ุงูุชุงุจุนุฉ ููุง |
| `name_ar` | VARCHAR(50) | NO | - | - | ุงุณู ุงูุนุฒูุฉ |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |

#### ๐ ุณุฌูุงุช (ูุฏูุฑูุฉ ุงูุนุฏูู)
| id | name_ar | ุงููุฏูุฑูุฉ |
|----|---------|----------|
| 1 | ุนุฒูุฉ ุจูู ุนูุงุถ | ุงูุนุฏูู |
| 2 | ุนุฒูุฉ ูููุงุช | ุงูุนุฏูู |
| 3 | ุนุฒูุฉ ุงูุนุงูุจุฉ | ุงูุนุฏูู |
| 4 | ุนุฒูุฉ ุงูุณุงุฑุฉ | ุงูุนุฏูู |
| 5 | ุนุฒูุฉ ุดูู | ุงูุนุฏูู |
| 6 | ุนุฒูุฉ ุจูู ูุงุช | ุงูุนุฏูู |
| 7 | ุนุฒูุฉ ุงูุบุถูุจุฉ | ุงูุนุฏูู |
| 8 | ุนุฒูุฉ ุงูุฌุจููู | ุงูุนุฏูู |
| 9 | ุนุฒูุฉ ูุฏุงุณ | ุงูุนุฏูู |
| 10 | ุนุฒูุฉ ุนุฑุฏู | ุงูุนุฏูู |

### 2๏ธโฃ ุฌุฏูู ุงููุฑู (`villages`)

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | MEDIUMINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู ุงููุฑูุฏ |
| `sub_district_id` | SMALLINT UNSIGNED | NO | - | FK | ุงูุนุฒูุฉ ุงูุชุงุจุนุฉ ููุง |
| `name_ar` | VARCHAR(50) | NO | - | - | ุงุณู ุงููุฑูุฉ |
| `is_active` | BOOLEAN | YES | TRUE | - | ุญุงูุฉ ุงูุชูุนูู |

#### ๐ ุณุฌูุงุช (ุนุฒูุฉ ุจูู ุนูุงุถ/ูููุงุช)
| id | name_ar | ุงูุนุฒูุฉ |
|----|---------|--------|
| 1 | ูุฑูุฉ ุงููุฎูุฉ | ูููุงุช |
| 2 | ูุฑูุฉ ูุงุฏู ุงููุฎูุฉ | ูููุงุช |
| 3 | ูุฑูุฉ ุจุฑุฏุงู | ูููุงุช |
| 4 | ูุฑูุฉ ุงูููุฑู | ูููุงุช |
| 5 | ูุฑูุฉ ุงููุณุฑุจ | ูููุงุช |
| 6 | ูุฑูุฉ ุงูุฌุจู | ุจูู ุนูุงุถ |
| 7 | ูุฑูุฉ ุงูุณุงูู | ุจูู ุนูุงุถ |
| 8 | ูุฑูุฉ ุงููุงุฏู | ุจูู ุนูุงุถ |
| 9 | ูุฑูุฉ ุงูุญุตู | ุจูู ุนูุงุถ |
| 10 | ูุฑูุฉ ุงูุฏุงุฑ | ุจูู ุนูุงุถ |

---

## โ๏ธ ุงููุณู 4: ุงูุฅุนุฏุงุฏุงุช ูุงูุชูููู

### 1๏ธโฃ ุฅุนุฏุงุฏุงุช ุงููุธุงู (`system_settings`) **(ูุงู ุฌุฏุงู)**
ููุญุฉ ุชุญูู ุงููุฏูุฑ ูุชุฎุตูุต ุงููุธุงู ุฏูู ุจุฑูุฌุฉ.

> ๐ก **ููุฑุฉ ุฐููุฉ:** ุจุฏูุงู ูู ุงูุงุชุตุงู ุจุงููุจุฑูุฌ ูุชุบููุฑ "ุดุนุงุฑ ุงููุฒุงุฑุฉ" ุฃู "ูุต ุชุฐููู ุงูุชูุฑูุฑ"ุ ูููู ูููุฏูุฑ ุงูุฏุฎูู ููุฐู ุงูุตูุญุฉ ูุชุบููุฑ ุงูุฅุนุฏุงุฏ ููุฑุงู!

#### ๐๏ธ ุจููุฉ ุงูุฌุฏูู (Schema Structure)
| ุงุณู ุงูุนููุฏ | ููุน ุงูุจูุงูุงุช | Null? | Default | ููุชุงุญ | ุงููุตู |
|------------|--------------|-------|---------|-------|-------|
| `id` | TINYINT UNSIGNED | NO | Auto Inc | PK | ุงููุนุฑู |
| `setting_key` | VARCHAR(100) | NO | - | UK | ููุชุงุญ ุงูุฅุนุฏุงุฏ (ุจุฑูุฌู) |
| `setting_value` | TEXT | YES | NULL | - | ุงููููุฉ |
| `setting_type` | ENUM | YES | text | - | ููุน ุงููููุฉ (text, number..) |
| `category` | VARCHAR(50) | YES | NULL | - | ุชุตููู ุงูุฅุนุฏุงุฏ |
| `description` | TEXT | YES | NULL | - | ูุตู ููุฅุฏุงุฑู |
| `is_editable` | BOOLEAN | YES | TRUE | - | ูู ูููู ุชุนุฏูููุ |

| ุงูููุชุงุญ (`setting_key`) | ุงููููุฉ (`setting_value`) | ุงููุตู |
|-------------------------|--------------------------|-------|
| `school_name` | ูุฏุฑุณุฉ ุงูููุฑ ุงูุฃุณุงุณูุฉ | ุงุณู ุงููุฏุฑุณุฉ ุงูุฐู ูุธูุฑ ูู ูู ููุงู |
| `report_footer_text` | ูุนุชุจุฑ ูุฐุง ุงููุดู ุฑุณูู.. | ุงููุต ุงูุฐู ูุธูุฑ ุฃุณูู ุงูุชูุงุฑูุฑ |
| `allow_grade_edit` | false | ููู ุชุนุฏูู ุงูุฏุฑุฌุงุช (ูุนู/ูุง) |
| `current_academic_year` | 1447 | ุงูุนุงู ุงูุฌุงุฑู |
| `logo_path` | /uploads/logo.png | ูุณุงุฑ ุงูุดุนุงุฑ |
| `theme_color` | #3498db | ุงูููู ุงูุฑุฆูุณู ูููููุน |
| `max_students_per_class`| 40 | ุชูุจูู ุนูุฏ ุชุฌุงูุฒ ุงูุนุฏุฏ |
| `weekend_days` | 6,7 (ุงูุฌูุนุฉ ูุงูุณุจุช) | ุฃูุงู ุงูุฅุฌุงุฒุฉ |
| `sms_enabled` | true | ุชูุนูู ุฑุณุงุฆู ุงูุฌูุงู |
| `show_ticker` | true | ุฅุธูุงุฑ ุดุฑูุท ุงูุฃุฎุจุงุฑ |

---

## ๐ง ุชุญููู ูุนูุงุฑู ููุฑุงุฌุนุฉ ุงูุฌูุฏุฉ
**ุจุตูุชู ูููุฏุณ ุจุฑูุฌูุงุชุ ูุฐุง ุชููููู ูุจููุฉ ูุฐุง ุงููุธุงู:**

1.  **ุงูุชูุงูู (Integrity):** ููุชุงุฒ. ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช (Foreign Keys) ูุถูู ุนุฏู ูุฌูุฏ "ุฏุฑุฌุงุช ูุทุงูุจ ุบูุฑ ููุฌูุฏ" ุฃู "ูุฑูุฉ ุจุฏูู ุนุฒูุฉ".
2.  **ูุงุจููุฉ ุงูุชูุณุน (Scalability):** ุนุงููุฉ ุฌุฏุงู. ุฅุถุงูุฉ ุฌุฏูู `lookup_buildings` ูุคุฎุฑุงู ูุซุจุช ุฃู ุงููุธุงู ูุชูุจู ุงูุชูุณุน ุฏูู ูุฏู ุงููุฏูู.
3.  **ุงูุฃุฏุงุก (Performance):** ุฌููุน ุงูุฌุฏุงูู ูููุฑุณุฉ (Indexed) ุจุดูู ุตุญูุญุ ููุง ูุถูู ุณุฑุนุฉ ุงูุจุญุซ ุญุชู ูุน ููุงููู ุงูุณุฌูุงุช.
4.  **ุณูููุฉ ุงูุตูุงูุฉ (Maintainability):** ูุตู "ุงูุซูุงุจุช" ูู ุฌุฏุงูู Lookup ูุฌุนู ุชุนุฏูู ุงุณู "ูุญุงูุธุฉ" ูุชู ูู ููุงู ูุงุญุฏ ูููุนูุณ ุนูู ุฃูู ุทุงูุจ ููุฑุงู.

> **ุงูุฎูุงุตุฉ:** ูุฐุง ุงููุธุงู ููุซู ุจููุฉ ุชุญุชูุฉ ูู ุงููุณุชูู ุงููุคุณุณู (Enterprise Grade)ุ ุฌุงูุฒ ูุฎุฏูุฉ ุงููุฏุฑุณุฉ ูุณููุงุช ูุงุฏูุฉ.

---

## ๐จ ููุงุตูุงุช ุงููุงุฌูุฉ ูุงูุฃุตูู (Frontend Specifications)

ุฌุฒุก ูู ุงูุจููุฉ ุงููุดุชุฑูุฉ ูู ุชูุญูุฏ "ูุธูุฑ ูุณููู" ุงููุธุงู (UI/UX). ูููุง ููู ุงููุนุงููุฑ ุงููุนุชูุฏุฉ:

### 1๏ธโฃ ุดุฑูุท ุงูุฃุฐูุงุฑ ูุงูุชูุจููุงุช (News Ticker)
*   **ุงููููุน:** ุฃุนูู ูู ุตูุญุฉ.
*   **ุงููุญุชูู:** ุฃุฐูุงุฑ ุชููุงุฆูุฉ ุฃู ุฅุนูุงูุงุช ุฅุฏุงุฑูุฉ ุนุงุฌูุฉ.
*   **ุงูุชูููุฉ:** CSS Animation (Marquee) ุณูุณุฉ.

### 2๏ธโฃ ุงููุถุน ุงููููู (Dark Mode)
*   **ุขููุฉ ุงูุนูู:** ุฒุฑ ุชุญููู ูุญูุธ ุงูุชูุถูู ูู `LocalStorage`.
*   **ุงูุฃููุงู:** ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช CSS Variables (ูุซู `--bg-color`, `--text-color`) ูู ุฌููุน ุงูุฃูุธูุฉ ูุถูุงู ุงูุชูุงูู.

### 3๏ธโฃ ุงูุชุฑููุณุฉ ูุงูุชุฐููู ุงูุฑุณูู (Official Headers)
*   **ุงูุชุฑููุณุฉ:** ูุฌุจ ุฃู ุชุญูู ุดุนุงุฑ ุงูุฌูููุฑูุฉ (ูููู)ุ ุงุณู ุงูุชูุฑูุฑ (ูุณุท)ุ ูุดุนุงุฑ ุงููุฒุงุฑุฉ (ูุณุงุฑ).
*   **ุงูุชุฐููู ุงูุงุฎุชูุงุฑู:** ุฎูุงุฑ "ุฅุธูุงุฑ ุงูุชุฐููู ุงูุฑุณูู" ุนูุฏ ุงูุทุจุงุนุฉุ ููุญุชูู ุนูู ูุต: *"ูุนุชุจุฑ ูุฐุง ุงููุดู ุฑุณูู ููุง ูุญุชุงุฌ ุฅูู ุฎุชู"* (ููุณุญุจ ุงููุต ูู ุฅุนุฏุงุฏุงุช ุงููุธุงู).

### 4๏ธโฃ ุฅุฏุฎุงู ุงูุจูุงูุงุช ุจูุธุงู ุงูุดุจูุฉ (Grid Data Entry)
*   **ุงูููุงู:** ุฌุฏุงูู ุฑุตุฏ ุงูุฏุฑุฌุงุชุ ุงูุฅุชูุงูุงุชุ ุงููุฎุงููุงุช.
*   **ุงูุฃุณููุจ:** ูุงุฌูุฉ ุชุดุจู Excel ุชุณูุญ ุจุงููุชุงุจุฉ ุงููุจุงุดุฑุฉ ูู ุงูุฎููุฉ ูุงูุชููู ุจุงูุฃุณููุ ุจุฏูุงู ูู ูุชุญ ูููุฐุฌ (Form) ููู ุณุฌู.

### 5๏ธโฃ ุชุญููู ุงูุฃุฑูุงู (Number to Text)
*   **ุงูุงุณุชุฎุฏุงู:** ุงููุจุงูุบ ุงููุงููุฉ ูู ุงูุณูุฏุงุช.
*   **ุงููุซุงู:** `500` -> "ุฎูุณูุงุฆุฉ ุฑูุงู ูููู ููุท ูุง ุบูุฑ". ูุชู ุฐูู ุนุจุฑ ุฏุงูุฉ JS ูุดุชุฑูุฉ.

---
**ุฅุนุฏุงุฏ ูุชูุซูู:** ุงููุฑูู ุงูููุฏุณู (ููุณู ุงูุนูุงุถู & ุนูุงุฏ ุงูุฌูุงุนู)
**ุขุฎุฑ ุชุญุฏูุซ:** 19 ููุงูุฑ 2026
